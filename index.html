
<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mural Estilo JN</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f7f7f7; }
    header { background: #003366; color: white; padding: 1rem; position: sticky; top: 0; z-index: 10; }
    nav { display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem; }
    nav a { color: white; text-decoration: none; font-weight: bold; }
    .hero { background: #ddd; padding: 1rem; }
    .hero img { width: 100%; max-height: 300px; object-fit: cover; border-radius: 8px; }
    .hero h1 { margin-top: 1rem; font-size: 2rem; }
    .hero p { font-size: 1.2rem; color: #333; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; padding: 1rem; }
    .noticia { background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 0 4px rgba(0,0,0,0.1); }
    .noticia img { width: 100%; max-height: 180px; object-fit: cover; border-radius: 4px; }
    .noticia h2 { font-size: 1.2rem; margin: 0.5rem 0 0.2rem; }
    .noticia p { font-size: 0.95rem; color: #444; }
    .admin { padding: 1rem; background: #fff; margin: 1rem; border-radius: 8px; box-shadow: 0 0 4px rgba(0,0,0,0.1); }
    input, textarea, select, button { width: 100%; padding: 0.5rem; margin-top: 0.5rem; border-radius: 4px; border: 1px solid #ccc; }
    button { background: #003366; color: white; font-weight: bold; margin-top: 1rem; cursor: pointer; }
  </style>
</head>
<body>
  <header>
    <h1>Mural Notícias</h1>
    <nav>
      <a href="#">Marketing</a>
      <a href="#">Audiovisuais</a>
      <a href="#">Videojogos</a>
    </nav>
  </header>

  <div class="admin" id="formulario" style="display:none;">
    <h2>Nova Notícia</h2>
    <form id="formNoticias">
      <input type="text" id="titulo" placeholder="Título" required />
      <input type="text" id="preview" placeholder="Subtítulo (preview)" required />
      <input type="text" id="imagem" placeholder="URL da imagem" />
      <select id="categoria">
        <option>Marketing</option>
        <option>Audiovisuais</option>
        <option>Videojogos</option>
      </select>
      <textarea id="descricao" placeholder="Texto completo" rows="6" required></textarea>
      <input type="hidden" id="editId">
      <button type="submit">Guardar Notícia</button>
    </form>
  </div>

  <section class="hero" id="hero"></section>
  <section class="grid" id="noticias"></section>

  <script>
    const isAdmin = window.location.search.includes("admin=1");
    if (isAdmin) document.getElementById("formulario").style.display = "block";

    let noticias = [];

    async function carregarNoticias() {
      try {
        const resp = await fetch('noticias.json');
        noticias = await resp.json();
        renderNoticias();
      } catch {
        noticias = [];
      }
    }

    function renderNoticias() {
      const hero = document.getElementById("hero");
      const grid = document.getElementById("noticias");
      hero.innerHTML = "";
      grid.innerHTML = "";
      if (noticias.length > 0) {
        const destaque = noticias[noticias.length - 1];
        hero.innerHTML = `
          <img src="${destaque.imagem}">
          <h1>${destaque.titulo}</h1>
          <p>${destaque.preview || ''}</p>
        `;
      }
      noticias.slice().reverse().forEach(n => {
        grid.innerHTML += `
          <div class="noticia">
            <img src="${n.imagem}">
            <h2>${n.titulo}</h2>
            <p>${n.preview || ''}</p>
          </div>
        `;
      });
    }

    document.getElementById("formNoticias").addEventListener("submit", e => {
      e.preventDefault();
      const id = document.getElementById("editId").value || "_" + Math.random().toString(36).substr(2, 9);
      const noticia = {
        id,
        titulo: document.getElementById("titulo").value,
        preview: document.getElementById("preview").value,
        imagem: document.getElementById("imagem").value,
        categoria: document.getElementById("categoria").value,
        descricao: document.getElementById("descricao").value,
        data: new Date().toISOString()
      };
      noticias = noticias.filter(n => n.id !== id);
      noticias.push(noticia);
      document.getElementById("formNoticias").reset();
      renderNoticias();
    });

    carregarNoticias();
  </script>
</body>
</html>
